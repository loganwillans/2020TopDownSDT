<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="movingdots/scripts/movingdots.js"></script>
    <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body></body>
  <script>

    /* create timeline */
    var timeline = [];

    /* define welcome message trial */
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "Welcome to the experiment. Press any key to begin."
    };
    timeline.push(welcome);

    var instructions = {
      type: 'html-keyboard-response',
      stimulus: 'Instructions part 1'
    }
    timeline.push(instructions)

    var scenario = {
      type: 'html-keyboard-response',
      stimulus: "scenario",
      trial_duration: 5000
    }

    var whitescreen = {
      type: 'html-keyboard-response',
      stimulus: '',
      trial_duration: 1000
    }

    var fastPlaceholder = {
      type: 'html-keyboard-response',
      stimulus: 'Placeholder fast'
    }

    var noFastPlaceholder = {
      type: 'html-keyboard-response',
      stimulus: 'Placeholder no fast'
    }
    
    var trialComplete ={
      type: 'html-keyboard-response',
      stimulus: 'trial is complete, moving to next trial'
    }

    var noFastBefore = {
      timeline: [scenario, noFastPlaceholder, whitescreen, trialComplete]
    }

    var noFastAfter = {
      timeline: [whitescreen, noFastPlaceholder, scenario, trialComplete]
    }

    var fastBefore = {
      timeline: [scenario, fastPlaceholder, whitescreen, trialComplete]
    }

    var fastAfter = {
      timeline: [whitescreen, fastPlaceholder, scenario, trialComplete]
    }

    var trialArray = [noFastAfter, noFastBefore, fastBefore, fastAfter]
    var shuffledTrialArray = jsPsych.randomization.repeat(trialArray, 5)

    for(var i = 0; i < shuffledTrialArray.length; i++){
      timeline.push(shuffledTrialArray[i])
    }



    /* start the experiment */
    jsPsych.init({
      timeline: timeline
    });
  </script>
</html>